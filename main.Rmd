--- 
title: "PS9591: Regressions and Causal Inference"
author: "Dr. Sebastián Vallejo Vera | Western University"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
# url: your book url like https://bookdown.org/yihui/bookdown
# cover-image: path to the social sharing image like images/cover.jpg
description: "Code, exercises, and slides for PS9591: Regressions and Causal Inference"
link-citations: yes
github-repo: svallejovera/regression_ci
---

# url: your book url like https://bookdown.org/yihui/bookdown

Placeholder


## About Tutorials
### Prerequisites
### Running a Tutorial
#### Method 1: Using RStudio
#### Method 2: Using R Console
### Tips for Success
### Troubleshooting Common Issues
### Getting Help
### Next Steps
## Assignments
## Final Exam
## Acknowledgments 

<!--chapter:end:index.Rmd-->

# Lecture 1: What is Causal Inference?

## Slides{.unnumbered}

- 2 What is Causal Inference? ([link](https://github.com/svallejovera/regression_ci/blob/main/slide/2%20What%20is%20Causal%20Inference.pptx)) 

## Introduction

On this first week, we introduce 'causal inference' as a concept of interest, and what are the main problems of determining causality from observational data. No fancy code for this week. 

The lecture slide are displayed in full below:

```{r week2slides, echo=FALSE,fig.align = 'center', out.width = "100%", fig.cap = "Slides for 2 What is Causal Inference?."}
knitr::include_graphics("slide/2_What_is_Causal_Inference.pdf")
```

<!--chapter:end:01-lecture1.Rmd-->


# Tutorial 1: Getting Started with R, RStudio and RMarkdown

Placeholder


## Installing R and RStudio
### RStudio
## A Quick Tour of the RStudio Interface
## R Working Directory
## Introduction to RMarkdown
### Why Use RMarkdown?
### Basic RMarkdown Syntax
### Creating an RMarkdown File
### Knitting
### RMarkdown cheatsheet:
## Installing R Packages
## Using AI Tools to Assist with R Programming
### How AI Can Help
### Limitations and Ethical Considerations
### Prompt Engineering Tips
### Example
## Quick Example: Importing and Checking Data from `wooldridge`
## Getting Help in R
## Style Guides in R
### The tidyverse Style Guide
### Quick Examples
### Other Style Guides
## Protips for R Success
### Enable Helpful RStudio Options
### Good Coding Practices
### Solutions to Common Problems

<!--chapter:end:02-tutorial1.Rmd-->


# Lecture 2: Introduction to Causal Inference

Placeholder


## Slides{.unnumbered}
## Introduction
## Vignette 2.1
## Vignette 2.2

<!--chapter:end:03-lecture2.Rmd-->

# Tutorial 2: Key Concepts

## What is this tutorial about? {.unnumbered}

You can access this tutorial by clicking [here](https://ci1yq0-sebastian0vallejo.shinyapps.io/tutorial2/). The tutorial will quiz you on key concepts from Chapter 1 of "Causal Inference: What If" by Hernán and Robins as well as Chapter 3 ("Describing Variables") of "The Effect" by Huntington-Klein.


<!--chapter:end:04-tutorial2.Rmd-->


# Lecture 2 Exercises

Placeholder


## Main Exercise
## Additional Exercises:
### STOP!!
### Continue
### Overall ratings of Trudeau
### Trudeau ratings by groups
### Gender
#### Age
#### Education
#### Ideology

<!--chapter:end:05-exercises2.Rmd-->


# Lecture 3: Core Concepts of Experimental Design

Placeholder


## Slides{.unnumbered}
## Introduction
## Vignette 3.1

<!--chapter:end:06-lecture3.Rmd-->

# Tutorial 3: More Key Concepts

## What is this tutorial about? {.unnumbered}

You can access this tutorial by clicking [here](https://ci1yq0-sebastian0vallejo.shinyapps.io/tutorial3/). This tutorial will test your understanding of key concepts from Chapter 2 of "Causal Inference: What If" by Hernán and Robins, focusing on randomized experiments. You'll engage with both theoretical concepts and practical data analysis.



<!--chapter:end:07-tutorial3.Rmd-->


# Lecture 3 Exercises

Placeholder


## `{dplyr}` primer
### The `select()` command in action
### Using `{summarise}` to calculate summary statistics
### The `{group_by}` and `{summarise}` combo
## Lecture 3 Exercises
## Additional Exercises:
### STOP!!
### Continue
### Group-wise means, mean differences, and statistical significance
### Interpretation of results

<!--chapter:end:08-exercises3.Rmd-->

# Lecture 4: The Simple Regression Model I

## Slides{.unnumbered}

- 5 The Simple Regression Model ([link](https://github.com/svallejovera/regression_ci/blob/main/slide/5_Simple_Regression_Model_I.pptx)) 

## Introduction

```{r echo=FALSE}
knitr::opts_chunk$set(echo=TRUE, warning=F, message=T, eval=T)
```

In the previous lecture, we explored how we can understand causal inference and the importance of random assignment. Experiments allow us to randomize the treatment and create believable counterfactuals. But we cannot solely rely on experiments to estimate causal relations. Thus, we study regression... 
The lecture slide are displayed in full below:
  
```{r week5slides, echo=FALSE,fig.align = 'center', out.width = "100%", fig.cap = "Slides for 4 The Simple Regression Model I."}
knitr::include_graphics("slide/5_Simple_Regression_Model_I.pdf")
```


<!--chapter:end:09-lecture4.Rmd-->

# Tutorial 4: The Simple Regression Model I

## What is this tutorial about? {.unnumbered}

You can access this tutorial by clicking [here](https://ci1yq0-sebastian0vallejo.shinyapps.io/tutorial4/). This tutorial will test your understanding of the Simple Regression Model (SRM), building on concepts from Wooldridge's Introductory Econometrics and Huntington-Klein's The Effect. You'll engage with both theoretical foundations and practical applications of simple regression analysis and related measures of relationship between variables.




<!--chapter:end:10-tutorial4.Rmd-->


# Lecture 4 Exercises

Placeholder


## Practice exercises
## Writing math in `RStudio` 
## STOP!!
## Continue
## Lecture exercises (Solutions)
### Q1. Produce a scatterplot with number of children (*children*) on the y axis and education (*educ*) on the $x$ axis
### Q2. How do the two variables appear to be related?;
### Q3. Estimate the regression equation of the number of children on education (note: we say "to regress $y$ on $x$"); 
### Q4. Interpret  $\hat{\beta_0}$ and  $\hat{\beta_1}$;
### Q5. Plot the regression line on the scatterplot; 
### Q6. Calculate *SST*, *SSE* and *SSR.* Verify that $SST = SSE + SSR$;
### Q7. Using $SST$, $SSE$ and $SSR$, calculate the $R^2$ of the regression. Verify it is the same as the $R^2$ reported in the summary of your regression output;
### Q8. Interpret the *R^2* of the regression.
## Additional practice exercises
## STOP!!
## Continue
### Q1. Produce a scatterplot of the two variables with a regression line visualized
### Q2. Describe the relationship (i.e. is it positive or negative)
### Q3. Run the regression and report the coefficients and what they mean
### Q4. Calculate the predicted rating for Justin Trudeau at the following levels of market liberalism: the lower tertile (33rd percentile), the mean, the upper quartile (75 percentile), and the maximum
### Q5. Explain how well market liberalism explains ratings of Justin Trudeau
### Q6. Explain what might be in the *u* term of the model
## Bonus content
### Looking inside model objects...
### How SE, t, and p are calculated 

<!--chapter:end:11-exercises4.Rmd-->


# Lecture 5: The Simple Regression Model II

Placeholder


## Slides{.unnumbered}
## Introduction
## Vignette 5.1
### Theorem SLR.1: Unbiasedness of OLS:
## Vignette 5.2
### a. Increased variation in $\mu$
### b. Increased variation in x is good:
### c. Increased sample size is good:

<!--chapter:end:12-lecture5.Rmd-->

# Tutorial 5: The Simple Regression Model II

## What is this tutorial about? {.unnumbered}

You can access this tutorial by clicking [here](https://ci1yq0-sebastian0vallejo.shinyapps.io/tutorial5/). This tutorial will focus on the fundamental theory underlying regression analysis, based on knowledge presented in Achen (1982) and Huntington-Klein's The Effect (2024). You'll be asked about both theoretical foundations and practical applications of regression analysis and how to interpret your findings.




<!--chapter:end:13-tutorial5.Rmd-->


# Lecture 5 Exercises

Placeholder


## How to (nicely) display model results
### The boring, ugly way (Base `R`)
### `{stargazer}`
### `{modelsummary}` 
## Functional form
### Feelings towards the LPC  (quadratics)
#### Calculating the turning point of a quadratic
### Occupational prestige (logarithms)
### Automobile performance (logarithms)
## Practice exercises
## STOP!!
## Continue
## Lecture exercises
### Q1. Estimate the regression equation of the number of children on education, age of the mother, and electricity.
### Q2. Interpret $\hat{\beta}_0$, $\hat{\beta}_{education}$, $\hat{\beta}_{age}$, and $\hat{\beta}_{electric}$
### Q3. Verify that sample covariance between predicted values and residuals = 0.
### Q4. Verify that sample covariance between education and residuals = 0.
### Q5. Re-estimate the regression equation of the number of children on education, age of the mother, and electricity but also include the square of the age of the mother. How do you now interpret the effect of age on the number of children?
### Q6. Estimate the regression equation of the hourly wage ($wage$) in dollars on education ($educ$) and experience ($exper$).
### Q7. How do the coefficients change when the units of wages are in cents instead of dollars?
### Q8. Compare the estimated coefficient for education to the one obtained by regressing only the hourly wage on educaiton. Interpret.
## Additional practice questions
### 1. For both Model 1 and Model 2, write the equation of the population models.
### 2. Run the regressions and write out the equations for the estimated regression models.
### 3. Explain what the coefficients mean in both models. How does the effect of age differ between Model 1 and Model 2?
### 4. Which of the models better explains the relationship between $marketlib$ and $age$?

<!--chapter:end:14-exercises4.Rmd-->

